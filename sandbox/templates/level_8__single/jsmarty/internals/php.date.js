function date(w,k){var q,C,I,w=w.split("");var r=(k)?new Date(k):new Date();for(q=0,C=w.length;q<=C;q++){switch(w[q]){case "d":I=r.getDate();w[q]=(I<10)?"0"+I:I;break;case "D":w[q]=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][r.getDay()];break;case "j":w[q]=r.getDate();break;case "l":w[q]=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][r.getDay()];break;case "N":I=r.getDay();w[q]=(I==0)?7:I;break;case "S":I=r.getDate().toString().slice(-1);w[q]=["th","st","nd","rd","th","th","th","th","th","th"][I];break;case "w":w[q]=r.getDay();break;case "z":w[q]=Math.ceil((r.getTime()-new Date(r.getFullYear(),0,1).getTime())/86400000);break;case "W":w[q]="";break;case "F":w[q]=["January","February","March","April","May","June","July","August","September","October","November","December"][r.getMonth()];break;case "m":I=r.getMonth()+1;w[q]=(I<10)?"0"+I:I;break;case "M":w[q]=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][r.getMonth()];break;case "n":w[q]=r.getMonth()+1;break;case "t":I=[31,28,31,30,31,30,31,31,30,31,30,31][r.getMonth()];w[q]=(I==28)?I+Number(date("L")):I;break;case "L":I=r.getFullYear();w[q]=(I%4)?0:(I%400)?(I%100)?1:0:1;break;case "o":w[q]="";break;case "Y":w[q]=r.getFullYear();break;case "y":w[q]=r.getFullYear().toString().slice(2,4);break;case "a":I=r.getHours();w[q]=(I<12)?"am":"pm";break;case "A":I=r.getHours();w[q]=(I<12)?"AP":"PM";break;case "B":w[q]="";break;case "g":I=r.getHours();w[q]=(I<12)?I:I-12;break;case "G":w[q]=r.getHours();break;case "h":I=r.getHours();I=(I<12)?I:I-12;w[q]=(I<10)?"0"+I:I;break;case "H":I=r.getHours();w[q]=(I<10)?"0"+I:I;break;case "i":I=r.getMinutes();w[q]=(I<10)?"0"+I:I;break;case "s":I=r.getSeconds();w[q]=(I<10)?"0"+I:I;break;case "e":w[q]="";break;case "I":w[q]="";break;case "O":w[q]="";break;case "P":w[q]="";break;case "T":w[q]="";break;case "Z":w[q]="";break;case "c":w[q]="";break;case "r":w[q]=date("D, d M Y H:m:s O",r.getTime());break;case "U":w[q]=r.getTime();break;}}return w.join("");}