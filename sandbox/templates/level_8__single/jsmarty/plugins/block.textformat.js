function jsmarty_block_textformat(C,f,q){if(!f){return ;}var r=JSmarty.Plugin.get("php.wordwrap");var O=JSmarty.Plugin.get("php.str_repeat");var w="",s;var d=null;var I=80;var A=null;var i=0;var H=false;var F="\n";var S=" ";var j=0;for(k in C){if(!C.hasOwnProperty(k)){continue;}switch(k){case "style":d=C[k];break;case "wrap":I=parseInt(C[k]);break;case "assign":A=C[k];break;case "indent":i=parseInt(C[k]);break;case "wrap_cut":H=parseInt(C[k]);break;case "wrap_char":F=C[k];break;case "indent_char":S=C[k];break;case "indent_first":j=parseInt(C[k]);break;default:q.trigger_error("textformat: unknown attribute");break;}}switch(d){case "email":I=72;break;}s=f.split(/\r?\n\r?\n/g);for(var V=0,D=s.length;V<D;V++){if(s[V]==""){continue;}s[V]=s[V].replace(/\s+/," ");s[V]=s[V].replace(/^(\s+)|(\s+)$/,"");if(j>0){s[V]=O(S,j)+s[V];}s[V]=r(s[V],I-i,F,H);if(i>0){s[V]=s[V].replace(/^/gm,O(S,i));}}w=s.join(F+F);if(A){q.assign(A,w);w="";}return w;}