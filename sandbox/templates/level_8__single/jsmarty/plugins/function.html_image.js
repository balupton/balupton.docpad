function jsmarty_function_html_image(C,I){if(!C.file){I.trigger_error("html_image: missing 'file' parameter");return "";}var r,V;var i;var H="";var w="";var d="";var q=[];var D="";var f="";var F="";var j="";var O="";for(k in C){if(!C.hasOwnProperty(k)){continue;}switch(k){case "dpi":i=C[k];break;case "file":w=C[k];break;case "width":d=C[k];break;case "height":D=paramas[k];break;case "basedir":j=C[k];break;case "path_prefix":O=C[k];break;case "link":case "href":f="<a href=\""+C[k]+"\">";F="</a>";break;case "alt":H=C[k];break;default:q.push(C[k]);break;}}if(w.charAt(0)=="/"){V=j+w;}else{V=w;}if(C.width==void (0)||C.height==void (0)){r=new Image();r.src=V;if(C.width==void (0)){d=r.width;}if(C.height==void (0)){D=r.height;}}return f+"<img src=\""+O+w+"\" width=\""+d+"\" height=\""+D+"\""+q.join(" ")+" />"+F;}