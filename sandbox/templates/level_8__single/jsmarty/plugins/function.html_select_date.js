function jsmarty_function_html_select_date(w,Y){var Za=Y.plugins_dir,K=JSmarty.Plugin;var O=K.get("php.range");var G=K.get("php.sprintf");var I=K.get("php.strftime");var s=K.get("function.html_options",Za);var M=K.get("shared.escape_special_chars",Za);var u,x=0,c=0,C,o,f,P=new JSmarty.Classes.Buffer();var j,J,z,T,W,A,g;var t=new Date().getTime();var U="Date_";var E=null;var oU=I("%Y");var r=null;var m=null;var Q=null;var d=null;var e=null;var F=oU;var a="%02d";var H=null;var R=null;var q=null;var V=null;var h="MDY";var l=null;var b="";var B=null;var X=true;var L="%B";var v=false;var p=true;var N=false;var y=true;var Z="\n";var D="%d";var S="%m";for(c in w){if(!w.hasOwnProperty(c)){continue;}switch(c){case "prefix":U=w[c];break;case "time":t=w[c];break;case "start_year":F=w[c];break;case "end_year":oU=w[c];break;case "month_format":L=w[c];break;case "day_format":a=w[c];break;case "day_value_format":D=w[c];break;case "field_array":V=w[c];break;case "day_size":E=w[c];break;case "month_size":R=w[c];break;case "year_extra":q=w[c];break;case "field_order":h=w[c];break;case "field_separator":Z=w[c];break;case "month_value_format":S=w[c];break;case "month_empty":B=w[c];break;case "day_empty":m=w[c];break;case "year_empty":H=w[c];break;case "all_empty":r=w[c];m=B=H=r;break;case "display_days":X=w[c];break;case "display_months":y=w[c];break;case "display_years":p=w[c];break;case "year_as_text":v=w[c];break;case "reverse_years":N=w[c];break;default:break;}}if(t.match&&t.match(/^-\d+$/)){t=date("Y-m-d",t);}if(!(t.match&&t.match(RegExp("^d{0,4}-d{0,2}-d{0,2}$")))){t=I("%Y-%m-%d",new Date(t).getTime());}t=t.split("-");if(match=oU.match(/^(\+|\-)\s*(\d+)$/)){if(match[1]=="+"){oU=I("%Y")+match[2];}else{oU=I("%Y")-match[2];}}if(match=F.match(/^(\+|\-)\s*(\d+)$/)){if(match[1]=="+"){F=I("%Y")+match[2];}else{F=I("%Y")-match[2];}}if(t[0].length>0){if(F>t[0]&&!w.start_year){F=t[0];}if(oU<t[0]&&!w.end_year){oU=t[0];}}h=h.toUpperCase();if(y){C=new JSmarty.Classes.Buffer();u=0,z=[],T=[];if(B){z[0]=B;T[0]="",u++;}for(c=0;c<12;c++){z[u+c]=I(L,new Date(2000,c).getTime());T[u+c]=I(S,new Date(2000,c).getTime());}C.append("<select name=");C.appendIf(V)("\"",U,"Month\"");C.appendIf(!V)("\"",V,"["+U+"Month]\"");C.appendIf(R)(" size=\"",R,"\"");C.appendIf(l)(" ",d);C.append(b,">\n");C.append(s({output:z,values:T,selected:t[1]?I(S,new Date(2000,t[1]-1).getTime()):""},Y));C.append("\n</select>");}if(X){o=new JSmarty.Classes.Buffer();u=0,j=[],J=[];if(m){j[0]=m;J[0]="",u++;}for(c=0;c<31;c++){j[u+c]=G(a,c+1);J[u+c]=G(D,c+1);}o.append("<select name=");o.appendIf(V)("\"",V,"[",U,"Day]\"");o.appendIf(!V)("\"",U,"Day\"");o.appendIf(E!==null)(" size=\"",E,"\"");o.appendIf(d!==null)(" ",d);o.appendIf(e!==null)(" ",e);o.append(b,">\n");o.append(s({output:j,values:J,selected:t[2]},Y));o.append("\n</select>");}if(p){f=new JSmarty.Classes.Buffer();g=(V)?V+"["+U+"Year]":U+"Year";if(v){f.append("<input type=\"text\" name=\"",g,"\" value=\"",t[0],"\" size=\"4\" maxlength=\"4\"");f.appendIf(d!==null)(" ",d);f.appendIf(q!==null)(" ",q);f.append(" />");}else{W=O(parseInt(F),parseInt(oU));(N)?W.reverse():W.sort();A=[].concat(W);if(H){W.unshift(H);A.unshift("");}f.append("<select name=\"",g,"\"");f.appendIf(Q!==null)(" size=\"",Q,"\"");f.appendIf(d!==null)(" ",q);f.append(b,">\n");f.append(s({output:W,values:A,selected:t[0]},Y));f.append("\n</select>");}}for(x=0;x<=2;x++){switch(h.charAt(x)){case "D":P.append(o.toString());break;case "Y":P.append(f.toString());break;case "M":P.append(C.toString());break;}}return P.toString(Z);}